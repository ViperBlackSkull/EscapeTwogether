<svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 240 200"
  class="puzzle-asset secret-message"
  role="img"
  aria-label="Mysterious envelope with hidden compartment"
>
  <defs>
    <!-- Envelope paper gradient -->
    <linearGradient id="envelopePaper" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#E8DDD0;stop-opacity:1" />
      <stop offset="50%" style="stop-color:#D9CBB8;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#C9B89D;stop-opacity:1" />
    </linearGradient>

    <!-- Aged paper inside -->
    <linearGradient id="agedPaperInside" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#F0E4D4;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#E0D0BC;stop-opacity:1" />
    </linearGradient>

    <!-- Shadow filter -->
    <filter id="envelopeShadow" x="-10%" y="-10%" width="130%" height="130%">
      <feDropShadow dx="3" dy="4" stdDeviation="4" flood-color="#1E293B" flood-opacity="0.35"/>
    </filter>

    <!-- Inner shadow -->
    <filter id="innerEnvelopeShadow">
      <feOffset dx="0" dy="2"/>
      <feGaussianBlur stdDeviation="2" result="offset-blur"/>
      <feComposite operator="out" in="SourceGraphic" in2="offset-blur" result="inverse"/>
      <feFlood flood-color="#1E293B" flood-opacity="0.2" result="color"/>
      <feComposite operator="in" in="color" in2="inverse" result="shadow"/>
      <feComposite operator="over" in="shadow" in2="SourceGraphic"/>
    </filter>

    <!-- Wax seal gradient -->
    <radialGradient id="secretWaxSeal" cx="40%" cy="40%" r="60%">
      <stop offset="0%" style="stop-color:#8B4513;stop-opacity:1" />
      <stop offset="40%" style="stop-color:#654321;stop-opacity:1" />
      <stop offset="70%" style="stop-color:#4A3520;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#3D2B1F;stop-opacity:1" />
    </radialGradient>

    <!-- Mysterious glow -->
    <filter id="mysteryGlow">
      <feGaussianBlur stdDeviation="3" result="blur"/>
      <feMerge>
        <feMergeNode in="blur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>

    <!-- Hidden message glow -->
    <radialGradient id="hiddenGlow" cx="50%" cy="50%" r="50%">
      <stop offset="0%" style="stop-color:#FFB74D;stop-opacity:0.3" />
      <stop offset="100%" style="stop-color:#FFB74D;stop-opacity:0" />
    </radialGradient>

    <!-- Brass clasp gradient -->
    <linearGradient id="brassClasp" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#D4AF37;stop-opacity:1" />
      <stop offset="50%" style="stop-color:#C5A028;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#996515;stop-opacity:1" />
    </linearGradient>

    <!-- Paper texture pattern -->
    <pattern id="paperAging" patternUnits="userSpaceOnUse" width="30" height="30">
      <circle cx="5" cy="10" r="0.5" fill="#8B7355" opacity="0.15"/>
      <circle cx="20" cy="5" r="0.3" fill="#7A6248" opacity="0.1"/>
      <circle cx="15" cy="25" r="0.4" fill="#6B5344" opacity="0.12"/>
      <circle cx="28" cy="18" r="0.3" fill="#8B7355" opacity="0.1"/>
    </pattern>
  </defs>

  <style>
    .secret-message { transition: transform 0.3s ease; }
    .secret-message:hover { transform: scale(1.02); }
    .secret-message:focus { outline: 2px solid #FFB74D; outline-offset: 4px; }
    .envelope-flap { transition: transform 0.4s ease; transform-origin: 120px 50px; }
    .secret-message:hover .envelope-flap { transform: translateY(-5px); }
    .hidden-message { opacity: 0.15; transition: opacity 0.3s ease; }
    .secret-message:hover .hidden-message { opacity: 0.4; }
    .secret-symbol { animation: pulse 3s ease-in-out infinite; }
    @keyframes pulse { 0%, 100% { opacity: 0.3; } 50% { opacity: 0.6; } }
    .mystery-particle { animation: float 4s ease-in-out infinite; }
    .particle-1 { animation-delay: 0s; }
    .particle-2 { animation-delay: 1s; }
    .particle-3 { animation-delay: 2s; }
    @keyframes float { 0%, 100% { transform: translateY(0) scale(1); } 50% { transform: translateY(-10px) scale(1.1); } }
  </style>

  <!-- Main envelope body -->
  <g filter="url(#envelopeShadow)">
    <!-- Envelope back -->
    <rect x="30" y="50" width="180" height="130" rx="3" fill="url(#envelopePaper)"/>
    <rect x="30" y="50" width="180" height="130" rx="3" fill="url(#paperAging)"/>

    <!-- Envelope front (with opening) -->
    <rect x="30" y="50" width="180" height="130" rx="3" fill="url(#envelopePaper)"/>

    <!-- Inner shadow at opening -->
    <rect x="40" y="55" width="160" height="40" fill="#1E293B" opacity="0.1"/>

    <!-- Visible paper inside -->
    <g transform="translate(50, 60)">
      <rect width="140" height="35" rx="1" fill="url(#agedPaperInside)"/>
      <rect width="140" height="35" rx="1" fill="url(#paperAging)"/>

      <!-- Hidden message symbols (faint) -->
      <g class="hidden-message" fill="#1E293B" font-family="Georgia, serif" font-size="8">
        <text x="10" y="15" opacity="0.6">X</text>
        <text x="30" y="18" opacity="0.5">?</text>
        <text x="50" y="14" opacity="0.7">III</text>
        <text x="75" y="17" opacity="0.5">?</text>
        <text x="95" y="15" opacity="0.6">VII</text>
        <text x="120" y="18" opacity="0.5">X</text>
      </g>

      <!-- Script lines visible -->
      <g stroke="#4A3B2A" stroke-width="0.5" opacity="0.3">
        <line x1="10" y1="25" x2="80" y2="25"/>
        <line x1="90" y1="25" x2="130" y2="25"/>
      </g>
    </g>
  </g>

  <!-- Envelope flap (triangular) -->
  <g class="envelope-flap">
    <path d="M30,50 L120,15 L210,50 L120,65 Z" fill="url(#envelopePaper)" stroke="#B8A88A" stroke-width="0.5"/>
    <path d="M30,50 L120,15 L210,50 L120,65 Z" fill="url(#paperAging)"/>

    <!-- Flap inner detail -->
    <path d="M50,50 L120,25 L190,50" fill="none" stroke="#C4B89A" stroke-width="0.5" opacity="0.5"/>

    <!-- Decorative border on flap -->
    <path d="M45,48 L120,20 L195,48" fill="none" stroke="#8B7355" stroke-width="0.5" opacity="0.3"/>
  </g>

  <!-- Wax seal -->
  <g transform="translate(120, 65)">
    <ellipse cx="0" cy="0" rx="22" ry="20" fill="url(#secretWaxSeal)"/>

    <!-- Wax drips -->
    <ellipse cx="-12" cy="15" rx="6" ry="5" fill="#4A3520"/>
    <ellipse cx="14" cy="14" rx="5" ry="4" fill="#3D2B1F"/>

    <!-- Seal impression - key symbol -->
    <g transform="translate(0, -2)" fill="url(#brassClasp)">
      <!-- Key head -->
      <circle cx="0" cy="-5" r="6" fill="none" stroke="#D4AF37" stroke-width="1.5"/>
      <circle cx="0" cy="-5" r="2" fill="#D4AF37"/>
      <!-- Key shaft -->
      <rect x="-1.5" y="0" width="3" height="12" rx="1"/>
      <!-- Key teeth -->
      <rect x="1.5" y="8" width="4" height="2" rx="0.5"/>
      <rect x="1.5" y="11" width="3" height="2" rx="0.5"/>
    </g>

    <!-- Highlight -->
    <ellipse cx="-8" cy="-6" rx="6" ry="5" fill="#A0522D" opacity="0.3"/>
  </g>

  <!-- Hidden compartment indicator (subtle) -->
  <g class="secret-indicator" opacity="0.5">
    <rect x="175" y="120" width="25" height="50" rx="2" fill="none" stroke="#8B7355" stroke-width="0.5" stroke-dasharray="2,2"/>
  </g>

  <!-- Secret symbols on envelope -->
  <g class="secret-symbol" fill="#1E293B" opacity="0.3">
    <!-- Mysterious symbols -->
    <text x="45" y="100" font-family="serif" font-size="12">?</text>
    <text x="185" y="95" font-family="serif" font-size="10">?</text>

    <!-- Subtle compass rose -->
    <g transform="translate(60, 145)" stroke="#6B5344" stroke-width="0.5" fill="none">
      <line x1="0" y1="-8" x2="0" y2="8"/>
      <line x1="-8" y1="0" x2="8" y2="0"/>
      <circle r="3"/>
      <text x="-2" y="-10" font-size="5" fill="#6B5344">N</text>
    </g>
  </g>

  <!-- Floating mysterious particles -->
  <g class="mystery-particles" fill="#FFB74D" opacity="0.4">
    <circle class="mystery-particle particle-1" cx="50" cy="40" r="2"/>
    <circle class="mystery-particle particle-2" cx="180" cy="35" r="1.5"/>
    <circle class="mystery-particle particle-3" cx="140" cy="25" r="1.8"/>
  </g>

  <!-- Address lines -->
  <g stroke="#6B5344" stroke-width="0.5" opacity="0.3">
    <line x1="60" y1="110" x2="160" y2="110"/>
    <line x1="60" y1="125" x2="140" y2="125"/>
    <line x1="60" y1="140" x2="120" y2="140"/>
  </g>

  <!-- Postmark -->
  <g transform="translate(170, 130)" opacity="0.25">
    <circle r="18" fill="none" stroke="#1E293B" stroke-width="1"/>
    <circle r="14" fill="none" stroke="#1E293B" stroke-width="0.5"/>
    <text x="-10" y="0" font-size="5" fill="#1E293B">1892</text>
    <text x="-8" y="6" font-size="4" fill="#1E293B">DEC 24</text>
  </g>

  <!-- Brass clasp on back -->
  <g transform="translate(35, 115)">
    <ellipse rx="8" ry="12" fill="url(#brassClasp)" stroke="#8B6914" stroke-width="0.5"/>
    <ellipse rx="4" ry="6" fill="#1E293B" opacity="0.3"/>
    <circle cy="-8" r="2" fill="#8B6914"/>
  </g>
</svg>
